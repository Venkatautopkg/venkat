---
Description: Generates a BigFix Task for the latest Royal TS
Identifier: com.github.bigfix.bigfix.RoyalTS
Input:
  # Name: Short Name of the Software, No spaces, Example: "DBBrowserforSQLite"
  NAME: "RoyalTS"
  # DisplayName: The start of the DisplayName key in the Windows Registry, Example: "DB Browser for SQLite"
  DisplayName: "Royal TS"
  VendorFolder: RoyalApps
  64BitOnly: true
  RecipeStatus: Verified
  template_file_path: "./%VendorFolder%/%NAME%-Win64-Install_Update.bes.mustache"
  # MinimumVersion of AutoPkg - Should always be 2.3 (or higher once a new version is released)
  content_id_product: "001"
MinimumVersion: "2.3"
ParentRecipe: com.github.bigfix.download.RoyalTS
Process:
  - Processor: com.github.jgstew.SharedProcessors/BigFixPrefetchItem
    Arguments:
      prefetch_url: "%download_url%"
  - Processor: com.github.jgstew.SharedProcessors/BigFixSetupTemplateDictionary
    Arguments:
      template_version: "%version%"
  # download icon file:
  - Processor: URLDownloaderPython
    Arguments:
      # need to provide filename to not overwrite the setup file
      filename: "%NAME%-icon.png"
      url: data:image/jpeg;base64,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
      COMPUTE_HASHES: false
  # get base64 of icon file
  - Processor: com.github.jgstew.SharedProcessors/FileGetBase64
  # add base64 of icon file to Template Dictionary
  - Processor: com.github.jgstew.SharedProcessors/TemplateDictionaryAppend
    Arguments:
      append_key: "icon_base64"
      append_value: "%file_base64%"
  # `BigFixSetupTemplateDictionary` creates a dictionary to fill out a bigix content template
  #   If `SourceReleaseDate` is not provided, it will be set to today
  - Processor: com.github.jgstew.SharedProcessors/GetRecipeParentFolderName
  - Processor: com.github.jgstew.SharedProcessors/FileTextSearcher
    Arguments:
      first_result_only: True
      search_path: '%VendorFolder%\vendor_metadata.cfg'
      # output_variable: "file_search_results"
      file_search_results_var: "content_id_vendor"
      search_pattern: 'content_id_vendor *= *(\d+)'
      search_extension: ".cfg"
  - Processor: com.github.jgstew.SharedProcessors/GetCommonPlatformEnumeration
  - Processor: com.github.jgstew.SharedProcessors/TemplateDictionaryAppendInput
  # `ContentFromTemplate` generates bigfix content from a mustache template file
  #   The file is filled out with variables from the Template Dictionary
  #   If variables are missing from the Template Dictionary, then that area will be blank
  - Processor: com.github.jgstew.SharedProcessors/ContentFromTemplate
    Arguments:
      template_file_path: "%template_file_path%"
      content_file_pathname: "%RECIPE_CACHE_DIR%/%NAME%.bes"

  # `BESImport` imports the generated BES content into a BigFix Server
  #   Which server and credentials are used is dictated by `~/.besapi.conf`
  - Processor: com.github.jgstew.SharedProcessors/BESImport

  # `BigFixActioner` creates an action from the imported BigFix Content
  #   The action is an offer that requires user interaction to run in self service application
  #   The action targets all computers whose name contains `autopkg`
  - Processor: com.github.jgstew.SharedProcessors/BigFixActioner

  - Processor: com.github.jgstew.SharedProcessors/TemplateDictionaryAppend
    Arguments:
      append_key: "patch"
      append_value: true

  - Processor: com.github.jgstew.SharedProcessors/ContentFromTemplate
    Arguments:
      # template_file_path: "%template_file_path%"
      content_file_pathname: "%RECIPE_CACHE_DIR%/%content_id_vendor%%content_id_product%01 %NAME%-Update.bes"
  - Processor: com.github.jgstew.SharedProcessors/BESImport
